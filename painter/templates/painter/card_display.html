{% load staticfiles %}

<!DOCTYPE html>
<html>
<head>
    <title>Imperial Painter</title>

    <link href="https://fonts.googleapis.com/css?family=Sarabun|ZCOOL+XiaoWei" rel="stylesheet">

    <link rel="stylesheet/less" type="text/css" href="{% static "styles/layout.less" %}">
    <link rel="stylesheet/less" type="text/css" href="{% static "styles/custom/main.less" %}" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/3.0.0/less.min.js" ></script>
</head>

<body>
    <table class="spoiler">
        <tr>
            {% for object in object_list %}
                {% with '1'|rjust:object.quantity as num_copies %}
                    {% for i in num_copies %}

                        {# Include the card itself. #}
                        <td class="card-cell">
                            <div class="card-wrapper">
                                {% include object.get_template with c=object.data name=object.name %}
                            </div>
                        </td>

                        {# Create a new row every three cards. #}
                        {% cycle 0 0 1 as linebreak silent %}
                        {% if linebreak %}
                            </tr>

                            {# Break onto a new printed page every three rows. #}
                            {% cycle 0 1 as pagebreak silent %}
                            {% if pagebreak and not forloop.parentloop.last  %}
                                </table>
                                <div class="page-break"></div>
                                <table class="spoiler">
                            {% endif %}

                            <tr>
                        {% endif %}

                    {% endfor %}
                {% endwith %}
            {% endfor %}
        </tr>
    </table>
</body>
</html>
